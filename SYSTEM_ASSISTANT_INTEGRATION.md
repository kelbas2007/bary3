# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. App Shortcuts API
- ‚úÖ `AppShortcutsManager.kt` - –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ shortcuts –≤ Google Assistant
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è shortcuts –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ shortcuts –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö shortcuts (–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–ø–∏–ª–∫–∏, —Å–æ–±—ã—Ç–∏—è)

### 2. Gemini Extensions Handler
- ‚úÖ `GeminiExtensionHandler.kt` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç Gemini —á–µ—Ä–µ–∑ @Bary3
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ deep links
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π: –æ—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫/—Å–æ–±—ã—Ç–∏–π

### 3. Flutter –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ `AppShortcutsService` - —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è shortcuts –∏–∑ Flutter
- ‚úÖ `LiveActivitiesService` - —Å–µ—Ä–≤–∏—Å –¥–ª—è Zero-UI –æ–ø—ã—Ç–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è shortcuts –≤ `main.dart`

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `MainActivity.kt` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ `SystemAssistantHandler.kt` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AppShortcutsManager
- ‚úÖ Method Channels –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è shortcuts

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

### 1. Digital Asset Links (–ö–†–ò–¢–ò–ß–ù–û)

–î–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ deep links –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Digital Asset Links:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.well-known/assetlinks.json` –Ω–∞ –≤–∞—à–µ–º –¥–æ–º–µ–Ω–µ:**

```json
[
  {
    "relation": ["delegate_permission/common.handle_all_urls"],
    "target": {
      "namespace": "android_app",
      "package_name": "com.bary3.app",
      "sha256_cert_fingerprints": [
        "SHA256_FINGERPRINT_–í–ê–®–ï–ì–û_DEBUG_–ö–õ–Æ–ß–ê",
        "SHA256_FINGERPRINT_–í–ê–®–ï–ì–û_RELEASE_–ö–õ–Æ–ß–ê"
      ]
    }
  }
]
```

2. **–ü–æ–ª—É—á–∏—Ç–µ SHA256 fingerprint:**

```bash
# –î–ª—è debug –∫–ª—é—á–∞:
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android

# –î–ª—è release –∫–ª—é—á–∞:
keytool -list -v -keystore path/to/your/keystore.jks -alias your_alias
```

3. **–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –ø–æ –∞–¥—Ä–µ—Å—É:**
   - `https://–≤–∞—à-–¥–æ–º–µ–Ω.com/.well-known/assetlinks.json`
   - –ò–ª–∏ `https://–≤–∞—à-–¥–æ–º–µ–Ω.com/.well-known/assetlinks.json`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é:**
   ```bash
   # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Google's Digital Asset Links API:
   https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://–≤–∞—à-–¥–æ–º–µ–Ω.com&relation=delegate_permission/common.handle_all_urls
   ```

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Google Play Console

1. **–í–æ–π–¥–∏—Ç–µ –≤ Google Play Console:**
   - https://play.google.com/console

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª App Actions:**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "App Actions" –≤ –º–µ–Ω—é —Å–ª–µ–≤–∞

3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ actions.xml:**
   - –§–∞–π–ª —É–∂–µ —Å–æ–∑–¥–∞–Ω: `android/app/src/main/res/xml/actions.xml`
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –≤ Play Console

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°–æ–∑–¥–∞–π—Ç–µ Internal Testing —Ç—Ä–µ–∫
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ APK —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ App Actions
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

5. **–û–ø—É–±–ª–∏–∫—É–π—Ç–µ:**
   - –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –≤ Production

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AndroidManifest.xml

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `AndroidManifest.xml` –µ—Å—Ç—å:

```xml
<!-- Deep Links –¥–ª—è App Actions -->
<intent-filter android:autoVerify="true">
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="bary3" />
</intent-filter>

<!-- App Actions metadata -->
<meta-data
    android:name="com.google.android.actions"
    android:resource="@xml/actions" />
```

‚úÖ –≠—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ!

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ App Actions

#### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:**
   ```bash
   flutter run
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é shortcuts:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Google Assistant
   - –°–∫–∞–∂–∏—Ç–µ: "–û–∫–µ–π Google, –æ—Ç–∫—Ä–æ–π –ë–∞—Ä–∏"
   - –ò–ª–∏: "–û–∫–µ–π Google, –ø–æ–∫–∞–∂–∏ –±–∞–ª–∞–Ω—Å –≤ –ë–∞—Ä–∏"

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ deep links:**
   ```bash
   adb shell am start -a android.intent.action.VIEW -d "bary3://screen?screen=balance"
   ```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Play Console:

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ APK –≤ Internal Testing
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Play Console
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ Google Assistant

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ò–∑ Flutter –∫–æ–¥–∞:

```dart
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è shortcuts –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
await AppShortcutsService.registerShortcuts();

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ shortcut
await AppShortcutsService.addContextualShortcut(
  id: 'active_piggy_1',
  shortLabel: '–ö–æ–ø–∏–ª–∫–∞',
  longLabel: '–û—Ç–∫—Ä—ã—Ç—å –∫–æ–ø–∏–ª–∫—É "–ù–æ–≤—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω"',
  deepLink: 'bary3://screen?screen=piggy_banks&id=1',
);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ shortcut
await AppShortcutsService.updateShortcut(
  'active_piggy_1',
  '–ù–æ–≤–∞—è –º–µ—Ç–∫–∞',
);

// –ü–æ–∫–∞–∑ Live Activity
await LiveActivitiesService.showBariStatus(
  status: '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –∑–∞–ø—Ä–æ—Å...',
  title: '–ë–∞—Ä–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç',
);
```

### –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

**–û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–æ–≤:**
- "–û–∫–µ–π Google, –æ—Ç–∫—Ä–æ–π –ë–∞—Ä–∏"
- "–û–∫–µ–π Google, –ø–æ–∫–∞–∂–∏ –±–∞–ª–∞–Ω—Å –≤ –ë–∞—Ä–∏"
- "–û–∫–µ–π Google, –æ—Ç–∫—Ä–æ–π –∫–æ–ø–∏–ª–∫–∏ –≤ –ë–∞—Ä–∏"
- "–û–∫–µ–π Google, –ø–æ–∫–∞–∂–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –≤ –ë–∞—Ä–∏"

**–°–æ–∑–¥–∞–Ω–∏–µ:**
- "–û–∫–µ–π Google, —Å–æ–∑–¥–∞–π –∑–∞–º–µ—Ç–∫—É –≤ –ë–∞—Ä–∏"
- "–û–∫–µ–π Google, –∑–∞–ø–ª–∞–Ω–∏—Ä—É–π —Å–æ–±—ã—Ç–∏–µ –≤ –ë–∞—Ä–∏"

**–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã:**
- "–û–∫–µ–π Google, –æ—Ç–∫—Ä–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤ –ë–∞—Ä–∏"

**–í–æ–ø—Ä–æ—Å—ã –∫ –ë–∞—Ä–∏:**
- "–û–∫–µ–π Google, —Å–ø—Ä–æ—Å–∏ –ë–∞—Ä–∏ [–≤–∞—à –≤–æ–ø—Ä–æ—Å]"

## üîß Troubleshooting

### Google Assistant –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é shortcuts:**
   ```dart
   final shortcuts = await AppShortcutsService.getRegisteredShortcuts();
   print('Registered shortcuts: $shortcuts');
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Digital Asset Links:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å SHA256 fingerprint
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ package_name —Å–æ–≤–ø–∞–¥–∞–µ—Ç

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ App Actions –≤ Play Console:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ actions.xml –∑–∞–≥—Ä—É–∂–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏

4. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Google Assistant:**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí Google ‚Üí –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Google Assistant

### Deep links –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ intent-filter –≤ AndroidManifest.xml**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ö–µ–º–∞ `bary3://` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ MainActivity**

### Shortcuts –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:

1. **–í—ã–∑–æ–≤–∏—Ç–µ `AppShortcutsService.registerShortcuts()` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç shortcuts (6 –º–∞–∫—Å–∏–º—É–º)**

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [App Actions Documentation](https://developers.google.com/assistant/app/overview)
- [App Shortcuts API](https://developer.android.com/guide/topics/ui/shortcuts)
- [Digital Asset Links](https://developers.google.com/digital-asset-links)
- [Gemini Extensions](https://developers.google.com/gemini/docs/extensions)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Digital Asset Links
2. ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å App Actions –≤ Play Console
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
4. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å iOS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é (Siri Shortcuts)
5. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö shortcuts
6. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Gemini Extensions API (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ)
