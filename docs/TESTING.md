# Руководство по тестированию

Руководство по тестированию приложения: ручное тестирование, автоматизированные тесты и отчеты.

## Быстрая проверка (5 минут)

### 1. Запуск приложения
- ✅ Приложение запускается без ошибок
- ✅ Видны все 5 вкладок внизу: Баланс, Копилки, Календарь, Уроки, Настройки

### 2. Навигация
- ✅ Переключение между вкладками работает
- ✅ Каждый экран открывается корректно

### 3. AI ассистент Бари
- ✅ Найти кнопку/аватар Бари (обычно в правом нижнем углу)
- ✅ Открыть чат
- ✅ Отправить: "куда уходят мои деньги"
- ✅ Должен прийти ответ про анализ трат
- ✅ Отправить: "мои копилки"
- ✅ Должен прийти ответ про копилки

## Полное тестирование (15-20 минут)

### Экран 1: Баланс
1. Открыть вкладку "Баланс"
2. Проверить отображение баланса
3. Нажать "Добавить доход" → проверить форму
4. Нажать "Добавить расход" → проверить форму
5. Проверить фильтры: День, Неделя, Месяц
6. Проверить список транзакций (если есть)

### Экран 2: Копилки
1. Открыть вкладку "Копилки"
2. Проверить список копилок
3. Нажать "Создать копилку" → проверить форму
4. Если есть копилки, открыть одну → проверить детали

### Экран 3: Календарь
1. Открыть вкладку "Календарь"
2. Проверить отображение календаря
3. Переключить месяц (вперёд/назад)
4. Проверить отображение событий (если есть)

### Экран 4: Уроки
1. Открыть вкладку "Уроки"
2. Проверить список уроков
3. Открыть урок → проверить содержимое
4. Пройти квиз → проверить результат

### Экран 5: Настройки
1. Открыть вкладку "Настройки"
2. Проверить все переключатели
3. Изменить язык → проверить локализацию
4. Проверить родительскую зону (если доступна)

## Автоматизированное тестирование

### Unit-тесты

```bash
# Запуск всех unit-тестов
flutter test

# Запуск конкретного теста
flutter test test/path/to/test.dart

# Запуск с покрытием
flutter test --coverage
```

### Widget-тесты

```dart
testWidgets('Button test', (WidgetTester tester) async {
  await tester.pumpWidget(MyWidget());
  expect(find.text('Button'), findsOneWidget);
});
```

### Integration-тесты

```bash
# Запуск integration-тестов
flutter test integration_test/
```

## Тестирование AI модуля

### Тестирование LocalLLMProvider

```dart
test('LocalLLMProvider generates response', () async {
  final provider = LocalLLMProvider();
  final response = await provider.tryRespond(
    userMessage: 'Привет',
    context: mockContext,
    locale: 'ru',
  );
  expect(response, isNotNull);
});
```

### Тестирование анализа трат

```dart
test('Spending analysis works', () async {
  final provider = LocalLLMProvider();
  final analysis = await provider.analyzeSpending(
    transactions: mockTransactions,
    locale: 'ru',
    context: mockContext,
  );
  expect(analysis, isNotNull);
});
```

## Тестирование уведомлений

### Проверка локальных уведомлений

1. Включить уведомления в настройках
2. Проверить ежедневное напоминание (20:00)
3. Проверить еженедельный обзор (воскресенье 18:00)
4. Проверить уведомление о повышении уровня

## Тестирование локализации

### Проверка всех языков

1. Переключить язык в настройках
2. Проверить все экраны на правильную локализацию
3. Проверить уведомления на правильный язык
4. Проверить AI ответы на правильный язык

## Отчеты о тестировании

### Покрытие тестами

```bash
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
```

### Результаты тестирования

- ✅ Все unit-тесты проходят
- ✅ Все widget-тесты проходят
- ✅ Integration-тесты проходят
- ✅ Ручное тестирование пройдено

## Чеклист перед релизом

- [ ] Все тесты проходят
- [ ] Ручное тестирование пройдено
- [ ] Локализация проверена
- [ ] Уведомления работают
- [ ] AI модуль работает
- [ ] Нет критических ошибок
- [ ] Производительность приемлема

---

*Последнее обновление: Январь 2025*
